<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø§Ù„Ù†Ø§Ø¬Ø­ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© | Ø¯. Ù…Ø­Ù…ÙˆØ¯ Ù†Ø§Ø¬Ø­</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --p: #0f172a; --a: #2563eb; --s: #10b981; --bg: #f8fafc; }
        body { font-family: 'Tajawal', sans-serif; background: var(--bg); margin: 0; overflow: hidden; }

        /* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ */
        #auth-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--p); display: flex; align-items: center; justify-content: center; z-index: 2000;
        }
        .auth-card {
            background: white; padding: 30px; border-radius: 20px; width: 90%; max-width: 400px; box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø¹Ù„ÙˆÙ‰ */
        header { 
            background: white; padding: 10px 20px; display: flex; justify-content: space-between; 
            align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); height: 60px;
        }

        /* Ø§Ù„ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .main-layout { display: flex; height: calc(100vh - 60px); overflow: hidden; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ */
        .video-content { flex: 3; padding: 20px; overflow-y: auto; background: #f1f5f9; }
        .video-holder { width: 100%; aspect-ratio: 16/9; background: #000; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .video-details { background: white; margin-top: 20px; padding: 20px; border-radius: 15px; border-bottom: 5px solid var(--a); }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
        .playlist-sidebar { flex: 1; background: white; border-right: 1px solid #e2e8f0; overflow-y: auto; padding: 10px; }
        .playlist-header { padding: 15px; border-bottom: 2px solid var(--bg); font-weight: bold; color: var(--a); }
        
        .lesson-item { 
            display: flex; gap: 10px; padding: 12px; border-radius: 12px; cursor: pointer; 
            transition: 0.3s; margin-bottom: 8px; border: 1px solid transparent; 
        }
        .lesson-item:hover { background: #f8fafc; }
        .lesson-item.active { background: #eff6ff; border-color: var(--a); }
        .lesson-thumb { width: 100px; height: 60px; border-radius: 8px; object-fit: cover; background: #eee; }
        .lesson-info h4 { margin: 0; font-size: 0.9rem; color: var(--p); }

        .input-field { width: 100%; padding: 12px; margin: 10px 0; border-radius: 10px; border: 1px solid #ddd; box-sizing: border-box; }
        .btn-primary { background: var(--a); color: white; border: none; width: 100%; padding: 12px; border-radius: 10px; font-weight: bold; cursor: pointer; }

        @media (max-width: 768px) {
            .main-layout { flex-direction: column; overflow-y: auto; }
            .playlist-sidebar { height: auto; border-right: none; border-top: 1px solid #ddd; }
            body { overflow: auto; }
        }
    </style>
</head>
<body>

<div id="auth-screen">
    <div class="auth-card">
        <h2 style="text-align: center; color: var(--p);">ğŸ“ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ Ø¨Ø·Ù„</h2>
        <p style="text-align: center; font-size: 0.9rem; color: #64748b;">Ø³Ø¬Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ø¯Ø®ÙˆÙ„ Ù…Ù†ØµØ© Ø§Ù„Ù†Ø§Ø¬Ø­</p>
        <input type="text" id="student-name" class="input-field" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ">
        <input type="tel" id="student-phone" class="input-field" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨">
        <button onclick="login()" class="btn-primary">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª</button>
    </div>
</div>

<header>
    <div style="font-weight: bold; color: var(--a); font-size: 1.2rem;">ğŸ›ï¸ Ù…Ù†ØµØ© Ø§Ù„Ù†Ø§Ø¬Ø­</div>
    <div style="display: flex; align-items: center; gap: 10px;">
        <span id="display-name" style="font-weight: bold; color: var(--p);">Ø·Ø§Ù„Ø¨ Ù…Ø´ØªØ±Ùƒ</span>
        <button onclick="addLessonPrompt()" style="background:none; border:none; cursor:pointer; font-size: 1.2rem;">âš™ï¸</button>
    </div>
</header>

<div class="main-layout">
    <div class="video-content">
        <div class="video-holder" id="player-container">
            <div style="height: 100%; display: flex; align-items: center; justify-content: center; color: white;">Ø§Ø®ØªØ± Ù…Ø­Ø§Ø¶Ø±Ø© Ù„Ù„Ø¨Ø¯Ø¡</div>
        </div>
        <div class="video-details">
            <h2 id="view-title">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©</h2>
            <p id="view-desc">ÙˆØµÙ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§..</p>
            <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button class="btn-primary" style="width: auto; padding: 8px 20px; background: var(--s);">ğŸ“„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ø²Ù…Ø©</button>
                <button class="btn-primary" style="width: auto; padding: 8px 20px; background: #64748b;">â“ Ø§Ø³Ø£Ù„ Ù…Ø³ØªØ± Ù…Ø­Ù…ÙˆØ¯</button>
            </div>
        </div>
    </div>

    <div class="playlist-sidebar">
        <div class="playlist-header">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</div>
        <div id="lessons-list">
            </div>
    </div>
</div>

<script>
    // 1. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø¯Ø±ÙˆØ³
    let lessons = JSON.parse(localStorage.getItem('dr_mahmoud_lessons')) || [
        { id: 'dQw4w9WgXcQ', title: 'Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© 1: ØªØ£Ø³ÙŠØ³ Ø§Ù„Ù†Ø­Ùˆ', desc: 'Ø´Ø±Ø­ Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„Ù†Ø­Ùˆ Ù…Ù† Ø§Ù„ØµÙØ±.' },
        { id: 'J---aiyznGQ', title: 'Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© 2: Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø®Ø¨Ø±', desc: 'Ø´Ø±Ø­ Ù…ÙØµÙ„ Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø®Ø¨Ø± Ù…Ø¹ ØªØ¯Ø±ÙŠØ¨Ø§Øª.' }
    ];

    // 2. ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¯Ø®ÙˆÙ„
    function login() {
        const name = document.getElementById('student-name').value;
        const phone = document.getElementById('student-phone').value;

        if(!name || !phone) return alert("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø§Ø³Ù…!");

        // Ø±Ø¨Ø· Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        document.getElementById('display-name').innerText = name;
        
        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø¬ÙˆØ¬Ù„ Ø´ÙŠØª (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ)
        const formURL = "https://docs.google.com/forms/d/e/1FAIpQLSdquIYIEiFWsx8ZGcSEvB305SgEgVrg81Fa8WaM9Ghg81ftJQ/formResponse";
        const formData = new FormData();
        formData.append("entry.2943987", name);
        formData.append("entry.1245975305", phone);
        fetch(formURL, { method: "POST", mode: "no-cors", body: formData });

        // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
        document.getElementById('auth-screen').style.display = 'none';
        renderPlaylist();
        if(lessons.length > 0) loadVideo(0);
    }

    // 3. Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
    function renderPlaylist() {
        const list = document.getElementById('lessons-list');
        list.innerHTML = lessons.map((l, i) => `
            <div class="lesson-item" onclick="loadVideo(${i})" id="lesson-${i}">
                <img class="lesson-thumb" src="https://img.youtube.com/vi/${l.id}/default.jpg">
                <div class="lesson-info">
                    <h4>${l.title}</h4>
                </div>
            </div>
        `).join('');
    }

    // 4. ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
    function loadVideo(index) {
        const lesson = lessons[index];
        document.getElementById('player-container').innerHTML = `
            <iframe width="100%" height="100%" src="https://www.youtube.com/embed/${lesson.id}?rel=0" frameborder="0" allowfullscreen></iframe>
        `;
        document.getElementById('view-title').innerText = lesson.title;
        document.getElementById('view-desc').innerText = lesson.desc;

        document.querySelectorAll('.lesson-item').forEach(el => el.classList.remove('active'));
        document.getElementById(`lesson-${index}`).classList.add('active');
    }

    // 5. Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯ (Ù„Ù„Ù…Ø¯ÙŠØ±)
    function addLessonPrompt() {
        const pass = prompt("ÙƒÙ„Ù…Ø© Ø³Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:");
        if(pass === "123") {
            const title = prompt("Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø¬Ø¯ÙŠØ¯:");
            const url = prompt("Ø±Ø§Ø¨Ø· ÙŠÙˆØªÙŠÙˆØ¨ Ø£Ùˆ Ø§Ù„Ù€ ID:");
            const desc = prompt("ÙˆØµÙ Ø§Ù„Ø¯Ø±Ø³:");

            if(title && url) {
                let id = url.includes('v=') ? url.split('v=')[1].split('&')[0] : url;
                lessons.push({ id, title, desc });
                localStorage.setItem('dr_mahmoud_lessons', JSON.stringify(lessons));
                renderPlaylist();
                alert("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©!");
            }
        }
    }
</script>
</body>
</html>
